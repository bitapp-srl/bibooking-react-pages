(this["webpackJsonpbibooking-react"]=this["webpackJsonpbibooking-react"]||[]).push([[0],{48:function(e,n,t){e.exports=t(66)},53:function(e,n,t){},66:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(27),i=t.n(o),c=t(22),l=(t(53),t(54),t(55),t(3)),u=t(2),s=t.n(u),d=t(9),f=t(12),m=t(5),h=t(4),v=t(7),b=t(45),g=function(e){return new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().slice(0,10)},p=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date;return"".concat(t,"-").concat(n,"-").concat(e)===g(r)},w=t(19);function O(){var e=Object(l.a)(["\n  border-radius: 3rem;\n  border: 0;\n  box-shadow: var(--shadow-2);\n  padding: 5rem 0;\n  [data-reach-menu-item] {\n    padding: 10rem 30rem;\n    transition: all 0.3s ease;\n    :hover {\n      background: var(--main);\n      color: var(--white);\n    }\n  }\n"]);return O=function(){return e},e}function y(){var e=Object(l.a)(["\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 22rem;\n  line-height: 22rem;\n"]);return y=function(){return e},e}function j(){var e=Object(l.a)(["\n  height: var(--header-height);\n  background-color: var(--main);\n  box-shadow: var(--shadow-2);\n  color: var(--white);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-weight: 300;\n  padding: 0 var(--lateral-padding);\n  position: sticky;\n  top: 0;\n  & > button:last-child > svg {\n    height: calc(var(--header-height) * 0.7);\n  }\n"]);return j=function(){return e},e}var E=h.a.header(j()),k=Object(h.a)(c.b)(y()),x=Object(h.a)(w.d)(O()),S=t(6),R=t(30),W=t.n(R);t(61),t(63);W.a.initializeApp({apiKey:"AIzaSyC4vRrAFqZm8r1plYtPLYJZm2IY2AR9d9w",authDomain:"bibooking.firebaseapp.com",databaseURL:"https://bibooking.firebaseio.com",projectId:"bibooking",storageBucket:"bibooking.appspot.com",messagingSenderId:"48933584913",appId:"1:48933584913:web:bfbd2076ad4118821a31b0"});var z=function(){var e=Object(d.a)(s.a.mark((function e(n,t){var r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return r=A.doc("users/".concat(n.uid)),e.next=5,r.get();case 5:if(e.sent.exists){e.next=16;break}return a=n.email,o=n.displayName,e.prev=8,e.next=11,r.set(Object(S.a)({displayName:o,email:a},t));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.error("Error creating user document",e.t0);case 16:return e.abrupt("return",P(n.uid));case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(n,t){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(s.a.mark((function e(n){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,A.doc("users/".concat(n)).get();case 5:return t=e.sent,e.abrupt("return",Object(S.a)({uid:n},t.data()));case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching user",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}(),C=W.a.auth(),A=W.a.firestore();function D(){return(D=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function I(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var L=a.a.createElement("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"}),_=function(e){var n=e.svgRef,t=e.title,r=I(e,["svgRef","title"]);return a.a.createElement("svg",D({className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",ref:n},r),t?a.a.createElement("title",null,t):null,L)},B=a.a.forwardRef((function(e,n){return a.a.createElement(_,D({svgRef:n},e))}));t.p;function M(){return(M=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function N(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var T=a.a.createElement("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"}),U=function(e){var n=e.svgRef,t=e.title,r=N(e,["svgRef","title"]);return a.a.createElement("svg",M({className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",ref:n},r),t?a.a.createElement("title",null,t):null,T)},Z=a.a.forwardRef((function(e,n){return a.a.createElement(U,M({svgRef:n},e))}));t.p;function F(){return(F=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function G(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var J=a.a.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z",clipRule:"evenodd"}),Y=function(e){var n=e.svgRef,t=e.title,r=G(e,["svgRef","title"]);return a.a.createElement("svg",F({className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",ref:n},r),t?a.a.createElement("title",null,t):null,J)},q=a.a.forwardRef((function(e,n){return a.a.createElement(Y,F({svgRef:n},e))})),K=(t.p,B),V=Z,$=q,H=Object(r.memo)((function(e){var n=e.children;return a.a.createElement(E,null,a.a.createElement(k,{to:"/"},a.a.createElement("h1",null,"BiBooking")),n,a.a.createElement(w.a,null,a.a.createElement(w.b,null,a.a.createElement($,null)),a.a.createElement(x,null,a.a.createElement(w.c,{onSelect:function(){return C.signOut()}},"Esci"))))})),Q={slots:{},isOpen:!1,selectedSlot:void 0,selectedWeek:0},X=function(e,n){var t=n.type,r=n.value,a=n.data,o=e.slots,i=e.selectedWeek;switch(t){case"loadSlots":return Object(S.a)(Object(S.a)({},e),{},{slots:a});case"open":return Object(S.a)(Object(S.a)({},e),{},{isOpen:!0,selectedSlot:r});case"close":return Object(S.a)(Object(S.a)({},Q),{},{slots:o,selectedWeek:i});case"previousWeek":return Object(S.a)(Object(S.a)({},e),{},{selectedWeek:i-1});case"nextWeek":return Object(S.a)(Object(S.a)({},e),{},{selectedWeek:i+1});case"today":return Object(S.a)(Object(S.a)({},e),{},{selectedWeek:0});default:return e}},ee=t(46);function ne(){var e=Object(l.a)(["\n  padding: 8rem 10rem;\n  background-color: var(--text);\n  color: var(--white);\n  border: 0;\n  border-radius: 5rem;\n"]);return ne=function(){return e},e}function te(){var e=Object(l.a)(["\n  border-bottom: 2rem solid var(--main);\n  outline: none;\n  background-color: var(--white);\n  padding: 0 3rem;\n  width: ",";\n  height: ",";\n"]);return te=function(){return e},e}function re(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: ",";\n  justify-content: ",";\n  align-items: ",";\n  width: ",";\n  height: ",";\n  padding: ",";\n"]);return re=function(){return e},e}var ae=h.a.div(re(),(function(e){var n=e.flexDirection;return void 0===n?"row":n}),(function(e){var n=e.justifyContent;return void 0===n?"center":n}),(function(e){var n=e.alignItems;return void 0===n?"center":n}),(function(e){var n=e.width;return n||"auto"}),(function(e){var n=e.height;return n||"auto"}),(function(e){var n=e.padding;return n||"0"})),oe=h.a.input(te(),(function(e){var n=e.width;return n||"auto"}),(function(e){var n=e.height;return n||"auto"})),ie=Object(h.a)(ee.a)(ne());function ce(){var e=Object(l.a)(["\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  :hover, :focus {\n    box-shadow: var(--shadow-1);\n    border-radius: 5rem;\n    outline: none;\n  }\n"]);return ce=function(){return e},e}function le(){var e=Object(l.a)(["\n  flex-direction: column;\n  justify-content: space-between;\n  height: calc(100vh - var(--header-height) - var(--day-header-height));\n  width: 100%;\n  :not(:last-child) { border-right: 1rem solid var(--border-gray); }\n"]);return le=function(){return e},e}function ue(){var e=Object(l.a)(["\n  flex-direction: column;\n  height: var(--day-header-height);\n  font-size: 18rem;\n  user-select: none;\n  span:last-child { font-size: 13rem; font-weight: 300; }\n\n  ","\n"]);return ue=function(){return e},e}function se(){var e=Object(l.a)(["\n  --day-header-height: 60rem;\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  grid-template-rows: 1fr;\n"]);return se=function(){return e},e}function de(){var e=Object(l.a)(["\n  & > div {\n    cursor: pointer;\n    border-radius: 50%;\n    height: calc(var(--header-height) * 0.7);\n    width: calc(var(--header-height) * 0.7);\n    :hover { background-color: var(--main-light); color: var(--main-dark) }\n    svg {\n      height: 30rem;\n    }\n  }\n  & > button {\n    border: 1rem solid var(--white);\n    border-radius: 6rem;\n    padding: 10rem 20rem;\n    margin-right: 25rem;\n    user-select: none;\n    outline: none;\n    transition: all 0.3s ease;\n    :hover { background-color: var(--white); color: var(--main); }\n  }\n"]);return de=function(){return e},e}var fe=Object(h.a)(ae)(de()),me=h.a.div(se()),he=Object(h.a)(ae)(ue(),(function(e){return e.today&&"\n    border-radius: 50rem;\n    background-color: var(--main);\n    height: calc(var(--day-header-height) - 13rem);\n    margin: auto 20rem;\n    color: var(--white);\n  "})),ve=Object(h.a)(ae)(le()),be=Object(h.a)(ae)(ce()),ge=["Luned\xec","Marted\xec","Mercoled\xec","Gioved\xec","Venerd\xec","Sabato","Domenica"],pe={"01":"Gennaio","02":"Febbraio","03":"Marzo","04":"Aprile","05":"Maggio","06":"Giugno","07":"Luglio","08":"Agosto","09":"Settembre",10:"Ottobre",11:"Novembre",12:"Dicembre"},we=[{id:0,starts_at:{datetime:"2020-10-22T15:30:00.000Z",timezone:"string"},ends_at:{datetime:"2020-10-22T16:00:00.000Z",timezone:"string"},capacity:0,bookings:25,promotion:{id:0,name:"string",code:"string",image:"string",description:"string"}},{id:1,starts_at:{datetime:"2020-10-22T16:00:00.000Z",timezone:"string"},ends_at:{datetime:"2020-10-22T16:30:00.000Z",timezone:"string"},capacity:0,bookings:5,promotion:{id:1,name:"string",code:"string",image:"string",description:"string"}}];var Oe=function(e){var n=e.handlePreviousWeek,t=e.handleNextWeek,r=e.handleToday;return a.a.createElement(fe,null,a.a.createElement("button",{onClick:r},"Oggi"),a.a.createElement(ie,{label:"Settimana precedente"},a.a.createElement(ae,{onClick:n},a.a.createElement(K,null))),a.a.createElement(ie,{label:"Prossima settimana"},a.a.createElement(ae,{onClick:t},a.a.createElement(V,null))))},ye=function(e){var n=e.day,t=e.month,r=e.date,o=e.year;return a.a.createElement(he,{today:p(r,t,o)},a.a.createElement("span",null,n),a.a.createElement("span",null,pe[t]," ",r))},je=function(e){var n=e.day,t=Object(b.a)(e,["day"]);return a.a.createElement(ve,null,Object(v.a)(Array(3)).map((function(e,r){return a.a.createElement(Ee,Object.assign({key:"day_".concat(n,"_daycell_").concat(r)},t,{slot:"test"}))})))},Ee=function(e){var n=e.onClick,t=e.slot;return a.a.createElement(be,{onClick:function(){return n(t)}})},ke=function(){var e=Object(r.useReducer)(X,Q),n=Object(f.a)(e,2),t=n[0],o=n[1],i=t.selectedWeek,c=Object(r.useMemo)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return e.setDate(e.getDate()+7*i),[1,2,3,4,5,6,7].map((function(n){return g(new Date(e.setDate(e.getDate()-e.getDay()+n)))}))}),[i]),l=Object(r.useCallback)(Object(d.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=we)instanceof Error||(t={},n.forEach((function(e){var n=e.starts_at.datetime.slice(0,10);t[n]?t[n].push(e):t[n]=[e]})),o({type:"loadSlots",data:t}));case 2:case"end":return e.stop()}}),e)}))),[]),u=function(e){return o({type:"open",value:e})};return Object(r.useEffect)((function(){l()}),[l]),a.a.createElement("div",null,a.a.createElement(H,null,a.a.createElement(Oe,{handlePreviousWeek:function(){return o({type:"previousWeek"})},handleNextWeek:function(){return o({type:"nextWeek"})},handleToday:function(){return o({type:"today"})}})),a.a.createElement(me,null,ge.map((function(e,n){return a.a.createElement(ye,{key:"day_header_".concat(e),day:e,month:c[n].slice(5,7),date:c[n].slice(8,10),year:c[n].slice(0,4)})}))),a.a.createElement(me,null,ge.map((function(e){return a.a.createElement(je,{key:"day_".concat(e),day:e,onClick:u})}))))},xe=t(47);function Se(){var e=Object(l.a)(["\n  border-radius: 30rem;\n  background-color: var(--main);\n  height: 48rem;\n  margin-top: 30rem;\n  width: 100%;\n  color: var(--white);\n"]);return Se=function(){return e},e}function Re(){var e=Object(l.a)(["\n  color: var(--error);\n  font-size: 12rem;\n"]);return Re=function(){return e},e}function We(){var e=Object(l.a)(["\n  border: 2rem solid var(--border-gray);\n  height: 38rem;\n  width: 100%;\n  border-radius: 7rem;\n  padding-left: 15rem;\n  margin-top: 20rem;\n  font-size: 15rem;\n  :hover, :focus {\n    border-color: var(--main-light);\n    transition: border-color 0.5s ease;\n  }\n  ","\n"]);return We=function(){return e},e}function ze(){var e=Object(l.a)(["\n  background-color: var(--white);\n  width: 28vw;\n  box-shadow: var(--shadow-1);\n  border-radius: 10rem;\n  flex-direction: column;\n  padding: 20rem 28rem;\n  h1 { font-size: 25rem; font-weight: 300; margin-bottom: 20rem; }\n  & > form {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n  }\n"]);return ze=function(){return e},e}function Pe(){var e=Object(l.a)(["\n  width: 100vw;\n  height: 100vh;\n  background-color: var(--main);\n"]);return Pe=function(){return e},e}var Ce=Object(h.a)(ae)(Pe()),Ae=Object(h.a)(ae)(ze()),De=Object(h.a)(oe)(We(),(function(e){return e.error&&"\n    border-color: var(--error);\n    :hover, :focus {\n      border-color: var(--error);\n    }\n  "})),Ie=h.a.span(Re()),Le=h.a.button(Se()),_e={required:!0};var Be=function(){var e=Object(xe.a)(),n=e.register,t=e.handleSubmit,r=e.errors;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ce,null,a.a.createElement(Ae,null,a.a.createElement(ae,{flexDirection:"column"},a.a.createElement("h1",null,"BiBooking")),a.a.createElement("form",{onSubmit:t((function(e){var n=e.email,t=e.password;C.signInWithEmailAndPassword(n,t).catch((function(e){return console.log("Error Signing in with email and password")}))}))},a.a.createElement(De,{name:"email",ref:n(_e),placeholder:"Email",error:r.email}),r.email&&a.a.createElement(Ie,null,"Inserisci un indirizzo email valido"),a.a.createElement(De,{name:"password",ref:n(_e),placeholder:"Password",error:r.password}),r.password&&a.a.createElement(Ie,null,"La password non pu\xf2 essere vuota"),a.a.createElement(Le,{type:"submit"},"Log in")))))},Me={loading:!1,user:null},Ne=Object(r.createContext)({state:Me,dispatch:function(){return null}}),Te=Ne.Provider,Ue=function(e,n){switch(n.type){case"toggleLoading":return Object(S.a)(Object(S.a)({},e),{},{loading:!e.loading});case"setUser":return Object(S.a)(Object(S.a)({},e),{},{user:n.data});default:return e}};function Ze(){var e=Object(l.a)(["\n  position: absolute;\n  top: 0;\n  height: 100vh;\n  width: 100vw;\n  background-color: black;\n  opacity: 0.8;\n  z-index: 100;\n  color: var(--white);\n  /* svg { animation: fa-spin 1s infinite linear; } */\n"]);return Ze=function(){return e},e}var Fe=Object(h.a)((function(e){return a.a.createElement(ae,e,"Loading...")}))(Ze()),Ge=function(){return a.a.createElement(m.c,null,a.a.createElement(m.a,{path:"/"},a.a.createElement(ke,null)))},Je=function(){return a.a.createElement(m.c,null,a.a.createElement(m.a,{path:"/"},a.a.createElement(Be,null)))},Ye=function(){var e=Object(r.useReducer)(Ue,Me),n=Object(f.a)(e,2),t=n[0],o=n[1],i=t.user,c=t.loading,l=Object(r.useMemo)((function(){return{state:t,dispatch:o}}),[t,o]);return Object(r.useEffect)((function(){C.onAuthStateChanged(function(){var e=Object(d.a)(s.a.mark((function e(n){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(n);case 2:t=e.sent,o({type:"setUser",data:t});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),[]),i?a.a.createElement(Te,{value:l},c&&a.a.createElement(Fe,null),a.a.createElement(Ge,null)):a.a.createElement(Je,null)},qe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ke(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(c.a,null,a.a.createElement(Ye,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/bibooking-react-pages",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/bibooking-react-pages","/service-worker.js");qe?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ke(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ke(n,e)}))}}()}},[[48,1,2]]]);
//# sourceMappingURL=main.ed6e4081.chunk.js.map